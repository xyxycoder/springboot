<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>XINY</title>
  <script src="//cdn.bootcss.com/angular.js/1.5.6/angular.min.js"></script>
  <link rel="stylesheet" href="/css/login/login.css"/>
  <link rel="stylesheet" href="/css/login/bootstrap.css"/>
  <script type="text/javascript">
    /*<![CDATA[*/
    var app = angular.module('register', []);
    app.controller('RegisterController', function($rootScope, $scope, $http) {
        $scope.message = '';
        $scope.userName = '';
        $scope.password = '';
        $scope.confirmPassword = '';
        //登录
        $scope.register = function() {
            $scope.msg = '';
            $http(
                {
                    url : '/register',
                    method : 'POST',
                    headers : {
                        'Content-Type' : 'application/json'
                    },
                    data : {
                        userName :$scope.userName,
                        password:$scope.password,
                        confirmPassword:$scope.confirmPassword
                    }
                }).success(function(r) {
                $scope.msg = r.msg;
                alert($scope.msg);
                window.location.href = '/login';
            }).error(function (r) {
                $scope.msg = r.msg;
                alert($scope.msg);
                return;
            });
        }
    });
    /*]]>*/
  </script>
</head>
<body ng-app="register" ng-controller="RegisterController">
<main class="auth-main">
  <div class="auth-block">
    <h1>Sign up to XINY</h1>
    <a href="login" class="auth-link">已经有账号? 点我登录!</a>

    <form class="form-horizontal">
      <!--<div class="form-group">-->
        <!--<label for="inputName3" class="col-sm-2 control-label">Name</label>-->

        <!--<div class="col-sm-10">-->
          <!--<input type="text" class="form-control" id="inputName3" placeholder="Full Name">-->
        <!--</div>-->
      <!--</div>-->

      <div class="form-group">
        <label for="inputEmail3" class="col-sm-2 control-label">账号</label>

        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputEmail3" placeholder="输入账号" ng-model="userName">
        </div>
      </div>

      <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">密码</label>

        <div class="col-sm-10">
          <input type="password" class="form-control" id="inputPassword3" placeholder="输入密码" ng-model="password">
        </div>
      </div>

      <div class="form-group">
        <label for="inputPassword3" class="col-sm-2 control-label">密码</label>

        <div class="col-sm-10">
          <input type="password" class="form-control" id="inputPassword4" placeholder="确认密码" ng-model="confirmPassword">
        </div>
      </div>

      <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
          <button type="submit" class="btn btn-default btn-auth" ng-click="register()">注册</button>
        </div>
      </div>
    </form>

    <div class="auth-sep"><span><span>or Sign up with one click</span></span></div>

    <div class="al-share-auth">
      <ul class="al-share clearfix">
        <li><i class="socicon socicon-facebook" title="Share on Facebook"></i></li>
        <li><i class="socicon socicon-twitter" title="Share on Twitter"></i></li>
        <li><i class="socicon socicon-google" title="Share on Google Plus"></i></li>
      </ul>
    </div>
  </div>
</main>
</body>
</html>